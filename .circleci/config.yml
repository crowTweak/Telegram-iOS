version: 2.1

jobs:
  build_telegram:
    macos:
      xcode: "15.4.0"
    resource_class: macos.m1.medium
    steps:
      - checkout
      - run:
          name: ğŸ›  Setup Bazel
          command: |
            brew install bazelisk
            echo "6.4.0" > .bazelversion
      - run:
          name: ğŸš€ Build App
          command: |
            python3 build-system/Make/Make.py \
              --overrideXcodeVersion \
              --overrideBazelVersion \
              build \
              --configuration release_arm64 \
              --xcodeManagedCodesigning

workflows:
  version: 2
  main_workflow:
    jobs:
      - build_telegram # Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± Ù‡Ùˆ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† ÙŠÙ†Ù‚ØµÙ†Ø§ Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„