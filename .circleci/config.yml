version: 2.1

jobs:
  build_telegram:
    macos:
      xcode: "15.4.0" # ูุณุฎุฉ ูุณุชูุฑุฉ ูุชูููุฌุฑุงู
    resource_class: macos.m1.medium # ูุนุงูุฌ M1 ุงูุณุฑูุน

    steps:
      - checkout # ุชุญููู ุงูููุฏ ูู ุญุณุงุจู

      - run:
          name: ๐ Setup Bazel
          command: |
            brew install bazelisk
            echo "6.4.0" > .bazelversion

      - run:
          name: ๐ Build App
          command: |
            # ุณูููู ุจุชุดุบูู ุงูุจูุงุก ุงูุฃุณุงุณู ููุชุฃูุฏ ูู ุฃู ุงูุณูุฑูุฑ ูุนูู
            # ุณูุญุชุงุฌ ูุฐุง ูุงุญูุงู ููุชุบูุฑุงุช ุงูุชูููุนุ ููููุง ูุจุฏุฃ ุจุงูุฎุทูุฉ ุงูุฃููู
            python3 build-system/Make/Make.py \
              --overrideXcodeVersion \
              --overrideBazelVersion \
              build \
              --configuration release_arm64 \
              --xcodeManagedCodesigning